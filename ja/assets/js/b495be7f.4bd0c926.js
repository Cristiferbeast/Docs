"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[975],{5123:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>h});var i=t(85893),o=t(11151);const a={},s=void 0,r={id:"asset-swapping/Advanced Asset Creation/Jiggle Physics",title:"Jiggle Physics",description:"Guide written by: Dytser",source:"@site/docs/asset-swapping/Advanced Asset Creation/Jiggle Physics.md",sourceDirName:"asset-swapping/Advanced Asset Creation",slug:"/asset-swapping/Advanced Asset Creation/Jiggle Physics",permalink:"/ja/docs/asset-swapping/Advanced Asset Creation/Jiggle Physics",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/asset-swapping/Advanced Asset Creation/Jiggle Physics.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Editing Character Model Sliders",permalink:"/ja/docs/asset-swapping/Advanced Asset Creation/Editing Character Model Sliders"},next:{title:"Creating A Blueprint Mod",permalink:"/ja/docs/category/creating-a-blueprint-mod"}},l={},h=[{value:"Minor NSFW warning",id:"minor-nsfw-warning",level:3},{value:"How do the work?",id:"how-do-the-work",level:3},{value:"Preparing the model",id:"preparing-the-model",level:2},{value:"Rigging",id:"rigging",level:3},{value:"Weight painting",id:"weight-painting",level:3},{value:"Bodyparts",id:"bodyparts",level:4},{value:"Detached Parts",id:"detached-parts",level:4},{value:"Exporting",id:"exporting",level:3},{value:"Recommended step: Adding an animation",id:"recommended-step-adding-an-animation",level:3},{value:"FBX settings for animations:",id:"fbx-settings-for-animations",level:4},{value:"Importing",id:"importing",level:3},{value:"Importing The animation into Unreal",id:"importing-the-animation-into-unreal",level:4},{value:"creating and working with animation blueprint",id:"creating-and-working-with-animation-blueprint",level:2},{value:"Compile",id:"compile",level:4},{value:"Loading an animation in the preview",id:"loading-an-animation-in-the-preview",level:4},{value:"REMEMBER!",id:"remember",level:3},{value:"Attaching the APB to the model",id:"attaching-the-apb-to-the-model",level:3},{value:"Packaging the mod.",id:"packaging-the-mod",level:2}];function d(e){const n={a:"a",br:"br",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Guide written by: Dytser"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Research by: Lewdlad, Dytser, Francislouis,"})]}),"\n",(0,i.jsx)(n.h3,{id:"minor-nsfw-warning",children:"Minor NSFW warning"}),"\n",(0,i.jsx)(n.p,{children:"In this page there will be references and discussion to breast physics and one small example shown of physics on a character model."}),"\n",(0,i.jsx)(n.h1,{id:"jiggle-physics",children:"Jiggle Physics"}),"\n",(0,i.jsx)(n.h3,{id:"how-do-the-work",children:"How do the work?"}),"\n",(0,i.jsx)(n.p,{children:"Jiggle physics in games are generally handled by a bone in the rig having physics attached to it, letting it move based on the momentum of the skeleton rather than any hardcoded/animated movement."}),"\n",(0,i.jsx)(n.p,{children:"The way this is setup is by having bones on the model to handle this and then having parts of our model weighted to these bones.\r\nMore on this below."}),"\n",(0,i.jsx)(n.p,{children:"in order to create and apply jiggle physics we need to do the following"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prepare the 3D model"}),"\n",(0,i.jsxs)(n.li,{children:["Export the model correctly","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Recommended step: Preparing an animation and exporting it"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Importing the model into Unreal Editor"}),"\n",(0,i.jsx)(n.li,{children:"Creating and working with the Animation BluePrint (ABP)"}),"\n",(0,i.jsx)(n.li,{children:"Attaching the ABP to your model"}),"\n",(0,i.jsx)(n.li,{children:"Exporting and packaging correctly."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"All of these steps will be explained below"}),"\n",(0,i.jsx)(n.h1,{id:"blender",children:"Blender"}),"\n",(0,i.jsx)(n.h2,{id:"preparing-the-model",children:"Preparing the model"}),"\n",(0,i.jsx)(n.p,{children:"There is different ideas of how to best set something like this up and it depends a lot on the individual how they approach it"}),"\n",(0,i.jsx)(n.h3,{id:"rigging",children:"Rigging"}),"\n",(0,i.jsx)(n.p,{children:'However a general rule is to have 1 bone for each part you plan to have move, More bones = more detail, This is called a "chain". Depending on what way you want to apply the physics it can also help having an extra one which your physics bones are attached to, Basically a "bone_parent"'}),"\n",(0,i.jsx)(n.p,{children:"In this example i am adding jiggle physics to breasts of a character, so breast_l and breast_r are both parented to breast_parent which is in turn parented to the upper spine bone, In Palworlds case this would be Spine_3 for example."}),"\n",(0,i.jsx)(n.h3,{id:"weight-painting",children:"Weight painting"}),"\n",(0,i.jsx)(n.p,{children:"Now that you have bones in your models character rig you need to give weight to the model to have it attach to the bones. Depending on how much you want them to have physics applied to them you may want to start smaller.\r\nThe amount of weight applied depends entirely on what you are trying to add physics to."}),"\n",(0,i.jsx)(n.h4,{id:"bodyparts",children:"Bodyparts"}),"\n",(0,i.jsx)(n.p,{children:"For things that are attached to the body such as breasts, butt, thigh, stomach, ears etc, You likely don't want to overdo it, I recommend starting small and increase from there if you want, For breast a good recommended weight would be 0.5 for example."}),"\n",(0,i.jsx)(n.h4,{id:"detached-parts",children:"Detached Parts"}),"\n",(0,i.jsx)(n.p,{children:'For things not attached to a characters body (hair, clothing tassels, etc) you generally would like to go stronger as having the part be "static" wouldnt look realistic, And unlike body fat physics which generally is more for secondary motion detached parts are more or less "made" of physics.'}),"\n",(0,i.jsx)(n.p,{children:"For example having a keychain attached to a weapon with a figurine on the other end of the chain. we expect this figure to move and adhere to physics entirely rather than only partially like we do a body."}),"\n",(0,i.jsx)(n.h3,{id:"exporting",children:"Exporting"}),"\n",(0,i.jsx)(n.p,{children:"Select all your meshes and the armature then export this as FBX."}),"\n",(0,i.jsx)(n.h3,{id:"recommended-step-adding-an-animation",children:"Recommended step: Adding an animation"}),"\n",(0,i.jsx)(n.p,{children:"This step can be skipped if you don't care, It can help to have some idea of how the animation will play out in the game instead of exporting it and constantly packaging it. Rebooting the game and recooking each time."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Lets import an animation instead!"}),"\r\nYou can either"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A:"})," Make a custom animation, such as the rig moving up down and sideways quickly to show off movement and help you get an idea of how it will behave."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"B:"})," import an animation from the game."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["for A:",(0,i.jsx)(n.br,{}),"\n","Just make your animation in blender, If you need instructions on that then you can refer to",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=PGvyBlgXHi8",children:"First Steps in Blender Animation \u2013 A Comprehensive Tutorial"}),(0,i.jsx)(n.br,{}),"\n","For B:",(0,i.jsx)(n.br,{}),"\n","In Fmodel you can navigate to\r\nContent/Pal/Animation",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Pal%20Animation%20location.png",alt:"Pal Animation location.png"}),(0,i.jsx)(n.br,{}),"\n",'Now simply find the animation of which you want to use, For example human "AS_Player_Female_Jog_None" and right click.',(0,i.jsx)(n.br,{}),"\n",'Choose "Save Animation"',(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Save%20Animation.png",alt:"Save Animation.png"}),(0,i.jsx)(n.br,{}),"\n","Now if you go back to your blender project (you might want to save a copy just in case) you can now select your armature and then go to",(0,i.jsx)(n.br,{}),"\n","file>Import>Import PSA",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Import%20skeleton%20Anim.png",alt:"Import skeleton Anim.png"}),(0,i.jsx)(n.br,{}),"\n","After your animation is imported, if you play, it should now play the animation."]}),"\n",(0,i.jsxs)(n.p,{children:["You want to now go to the Dope Sheet by clicking the icon in the top right corner and changing this to the Dope Sheet.",(0,i.jsx)(n.br,{}),"\n","While in the dope sheet you will likely be presented with keyframes all over the place, What you really only care about is the starting and end keyframes.",(0,i.jsx)(n.br,{}),"\n","You can see in the next image the animation I imported starts at 0 and ends at 45",(0,i.jsx)(n.br,{}),"\n","Now change the starting and end frames in the bottom right of the dopesheet to match the animation.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Dopesheet.png",alt:"Dopesheet.png"}),(0,i.jsx)(n.br,{}),"\n","Now if you play your animation it should loop.\r\nWith your animation created and setup in blender to loop correctly, You want to select your model + armature like usual and export to FBX"]}),"\n",(0,i.jsx)(n.h4,{id:"fbx-settings-for-animations",children:"FBX settings for animations:"}),"\n",(0,i.jsx)(n.p,{children:"Follow the usual FBX export settings. Such as turn off leaf bones etc"}),"\n",(0,i.jsxs)(n.p,{children:["And under ",(0,i.jsx)(n.strong,{children:"Bake Animation"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["turn off both ",(0,i.jsx)(n.strong,{children:"NLA Strips"})," as well as ",(0,i.jsx)(n.strong,{children:"All actions"})]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure ",(0,i.jsx)(n.strong,{children:"Force Start/End Keyframes"})," and ",(0,i.jsx)(n.strong,{children:"Key All Bones"})," are toggled on\r\n",(0,i.jsx)(n.a,{href:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Bake%20Animation%20Export%20settings.png",children:"Bake Animation Export settings.png"})]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"unreal-engine",children:"Unreal Engine"}),"\n",(0,i.jsx)(n.h3,{id:"importing",children:"Importing"}),"\n",(0,i.jsx)(n.p,{children:"Import the file like normal, Select the physicsasset and skeleton if its already in the project, Otherwise import them and place them according to their original File structure."}),"\n",(0,i.jsxs)(n.p,{children:["If you are unsure how to do that, Follow the instructions on\r\n",(0,i.jsx)(n.a,{href:"https://pwmodding.wiki/docs/asset-swapping/PackagingInUE5",children:"Packaging final mod file through UE5"})]}),"\n",(0,i.jsx)(n.h4,{id:"importing-the-animation-into-unreal",children:"Importing The animation into Unreal"}),"\n",(0,i.jsx)(n.p,{children:"You import the animation just like how you import any other model, Just put it somewhere and direct its skeleton etc the way you do the other files.\r\nI recommend naming them Anim that way you can easily find and know which files belong to the animations after cooking."}),"\n",(0,i.jsx)(n.h2,{id:"creating-and-working-with-animation-blueprint",children:"creating and working with animation blueprint"}),"\n",(0,i.jsxs)(n.p,{children:["Right click your mesh in unreal. and go to ",(0,i.jsx)(n.strong,{children:"Create>Anim Blueprint"})," And name it whatever you want.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Create%20ABP.png",alt:"Create ABP.png"}),(0,i.jsx)(n.br,{}),"\n","This will create an Animation Blueprint next to your models skeleton file.\r\nNow you want to right click and add ",(0,i.jsx)(n.strong,{children:"Input pose"})," & ",(0,i.jsx)(n.strong,{children:"Spring Controller"})]}),"\n",(0,i.jsxs)(n.p,{children:["Attach the input pose into the spring controller and the spring controller into the output pose.\r\nUnreal will auto create ",(0,i.jsx)(n.strong,{children:"Local to Component"})," nodes and attach them as intended in your setup.\r\nNow you will want to give a spring controller for each physics bone you have."]}),"\n",(0,i.jsxs)(n.p,{children:["For example this is my setup for Breast physics on my current model.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Breast%20physics%20example.png",alt:"Breast physics example.png"}),(0,i.jsx)(n.br,{}),"\n","Remember that physics goes from left to right in this case. So you would want your first node to be the left one, In this case i have breast Parent as the first node in my setup and every node thereafter is the two breast nodes attached to the parent.\r\nThe Left and Right breasts are not attached to each other so their order does not matter"]}),"\n",(0,i.jsx)(n.h4,{id:"compile",children:"Compile"}),"\n",(0,i.jsxs)(n.p,{children:["After you make changes, you will need to compile these in Unreal Editor. Click either the green button on the preview window Or the Compile button in the upper left corner above your preview window.\r\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Compile%20Preview%20Button.png",alt:"Compile Preview Button.png"})," ",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Compile%20button.png",alt:"Compile button.png"})]}),"\n",(0,i.jsxs)(n.p,{children:["Its important that you have ",(0,i.jsx)(n.strong,{children:"Input pose"})," as the first node and it all going into ",(0,i.jsx)(n.strong,{children:"Output pose"})," as the output when you later cook your files."]}),"\n",(0,i.jsx)(n.h4,{id:"loading-an-animation-in-the-preview",children:"Loading an animation in the preview"}),"\n",(0,i.jsxs)(n.p,{children:["If you followed my recommended step and have an animation in unreal you can now right click and go to ",(0,i.jsx)(n.strong,{children:'Animation>Sequence>play "animationname"'}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Play%20Animation%20Name.png",alt:"Play Animation Name.png"})]}),"\n",(0,i.jsxs)(n.p,{children:["Now simply attach it instead of the input pose into the load order and compile",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Loaded%20Animation%20Sequence.png",alt:"Loaded Animation Sequence.png"})]}),"\n",(0,i.jsxs)(n.p,{children:["Now if you look in your preview window you should see an animation going!",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/JigglePreviewGif.gif",alt:"JigglePreviewGif.gif"}),(0,i.jsx)(n.br,{}),"\n","With this you should have SOME idea how it will work ingame, Do note it wont be 1:1 when you actually get it ingame."]}),"\n",(0,i.jsx)(n.h3,{id:"remember",children:"REMEMBER!"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'You need to re attach the "Input Pose" and compile before cooking your project!'})}),"\n",(0,i.jsx)(n.h3,{id:"attaching-the-apb-to-the-model",children:"Attaching the APB to the model"}),"\n",(0,i.jsxs)(n.p,{children:["Double click your model and scroll down past the ",(0,i.jsx)(n.strong,{children:"Mesh"})," Settings\r\nFind the ",(0,i.jsx)(n.strong,{children:"Skeletal Mesh"})," dropdown and open it.\r\nInside you will find the option for ",(0,i.jsx)(n.strong,{children:"Post Process Anim Blueprint"})," Select your newly made ABP and save the model.\r\n",(0,i.jsx)(n.img,{src:"https://github.com/Dytser/Palworld-Modding-Wiki/blob/main/JigglePhysics_Images/Attaching%20the%20ABP.png?raw=true",alt:"Attaching the ABP.png"})]}),"\n",(0,i.jsx)(n.p,{children:"Congratulations you now have added Jiggle Physics to your model"}),"\n",(0,i.jsx)(n.h2,{id:"packaging-the-mod",children:"Packaging the mod."}),"\n",(0,i.jsxs)(n.p,{children:["Follow packaging instructions like you would any other mod.\r\nHowever now with your ABP there will be the physics ABP file in your skeleton folder, You want to keep this for the mod.",(0,i.jsx)(n.br,{}),"\n",'Naivgate to "Content\\Pal\\Model\\Character\\Skeleton\\Human" or wherever your skeleton would be stored.',(0,i.jsx)(n.br,{}),"\n",'For example i named my ABP "oldClothJiggles".  So i now make sure to keep the ',(0,i.jsx)(n.strong,{children:"OldClothJiggles.uasset"})," and ",(0,i.jsx)(n.strong,{children:"OldClothJiggles.uexp"})," from the cooked folder when packaging the mod."]}),"\n",(0,i.jsxs)(n.p,{children:["When in doubt remember: ",(0,i.jsx)(n.strong,{children:"Delete the skeleton. Keep the ABP"}),"\r\nIt will attach to the bones on the mesh and since you didnt change the skeleton in the core of unreal it wont screw up the model ingame."]})]})}function c(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>s});var i=t(67294);const o={},a=i.createContext(o);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);